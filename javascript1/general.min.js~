
$(document).ready(function(){existeMapa=$(".mapa").attr("id");if(typeof(existeMapa)!="undefined"){iniciarMapas();}
var addthis_config={data_track_clickback:true,ui_language:"en"};$.ajaxSetup({cache:false});$(".recursoAudio").media({width:120,height:20,autoplay:false,attrs:{width:'120',height:'20'}});$(".recursoVideo").media({width:320,height:240,autoplay:false,attrs:{width:'320',height:'240'}});$(".menuGeneral").mouseover(function(){$(this).toggleClass("ui-state-hover");$(this).find(".subMenu li").css("border","0");$(this).find(".subMenu li").css("border-bottom","1px solid #dddddd");$(this).find(".subMenu").toggle();});$(".menuGeneral").mouseout(function(){$(this).toggleClass("ui-state-hover");$(this).find(".subMenu").toggle();});$(".opcionMenu, .subMenu li").mouseover(function(){$(this).toggleClass("ui-state-hover");});$(".opcionMenu, .subMenu li").mouseout(function(){$(this).toggleClass("ui-state-hover");});$(".grilla").sortable({disabled:true});$(".grilla").disableSelection();$(".botonesOcultos").mouseover(function(){$(this).find(".oculto").toggle();});$(".botonesOcultos").mouseout(function(){$(this).find(".oculto").toggle();});$("button").each(function(){icono=$(this).attr("title");$(this).button({icons:{primary:icono}});$(this).removeAttr("title");});$(".tituloMensaje").click(function(){if($(this).nextAll(".contenidoMensaje").is(":visible")){$(this).nextAll(".contenidoMensaje").hide();}else{$(".contenidoMensaje").hide();$(this).nextAll(".contenidoMensaje").show();}
return false;});$("button").not(".directo").click(function(){$("#indicadorEspera").css("display","block");formulario=$(this).parents("form");destino=$(formulario).attr("action");$(formulario).ajaxForm({dataType:"json"});$(formulario).ajaxSubmit({dataType:"json",success:procesaRespuesta});return false;});$(".enlaceAjax").click(function(){$("#indicadorEspera").css("display","block");destino=$(this).attr("alt");$.ajax({type:"POST",url:destino,dataType:"json",success:procesaRespuesta});return false;});$(".autocompletable").autocomplete({minLength:3,source:$(this).attr("title")});$("#calendarioEventos").datepicker({inline:true,dateFormat:"yy-mm-dd",onSelect:function(fecha,instancia){}});$(".fechaReciente").datepicker({dateFormat:"yy-mm-dd",changeMonth:true,changeYear:true,showButtonPanel:true,minDate:0,maxDate:365});$(".fechaAntigua").datepicker({dateFormat:"yy-mm-dd",changeMonth:true,changeYear:true,showButtonPanel:true,yearRange:"c-100:c"});$("#animacionNoticias").cycle({fx:"fade",speed:2000,timeout:2000,fit:true,pause:1,sync:true,before:function(){clase=$(this).find("img").attr("alt");$("#miniaturasNoticias li img").css("opacity","0.75");$("#titularesNoticias li a p").removeClass("ui-state-active");$("#titularesNoticias li a p."+clase).toggleClass("ui-state-active");$("#miniaturasNoticias li img."+clase).css("opacity","1");}});$("#miniaturasNoticias li img, #titularesNoticias li a p").mouseover(function(){actual=$("#titularesNoticias li a p.ui-state-active").attr("alt");clase=$(this).attr("alt");$("#animacionNoticias").cycle("pause");$("#miniaturasNoticias li img").css("opacity","0.75");$("#titularesNoticias li a p").removeClass("ui-state-active");$("#titularesNoticias li a p").removeClass("ui-state-hover");$("#titularesNoticias li a p."+clase).toggleClass("ui-state-hover");$("#miniaturasNoticias li img."+clase).css("opacity","1");});$("#miniaturasNoticias li img, #titularesNoticias li a p").mouseout(function(){clase=$(this).attr("alt");$("#titularesNoticias li a p").removeClass("ui-state-hover");$("#titularesNoticias li a p."+actual).toggleClass("ui-state-active");$("#animacionNoticias").cycle("resume");});$(".pestanas").tabs({cookie:{expires:30}});$(".acordeon").accordion({autoHeight:false,collapsible:true,active:false});$("#cuadroDialogo").dialog({bgiframe:true,autoOpen:false,resizable:false,draggable:false,modal:true,width:600,height:400});$(".ampliarImagen").click(function(){destino=$(this).attr("title");$("#cuadroDialogo").html("<img src=\""+destino+"\" class=\"imagenAmpliada\"/>");$("#cuadroDialogo").dialog("open");$("#cuadroDialogo").dialog({width:820,height:640,close:function(){$("#cuadroDialogo").html("");}});});$("#full").show();});function procesaRespuesta(respuesta){$("#indicadorEspera").css("display","none");if(respuesta.error){alert(respuesta.mensaje);$(respuesta.destino).dialog("close");$(respuesta.destino).dialog("destroy");}else{if(respuesta.accion=="recargar"){if(respuesta.mensaje){alert(respuesta.mensaje);}
window.location.reload();}else if(respuesta.accion=="insertar"&&respuesta.destino!=""){$(respuesta.destino).html(respuesta.contenido);if(respuesta.limpiar){$(respuesta.destino).parent("form").clearForm();}}else if(respuesta.accion=="redireccionar"&&respuesta.destino!=""){if(respuesta.mensaje){alert(respuesta.mensaje);}
window.location.href=respuesta.destino;}else if(respuesta.generar){if(respuesta.destino){if(respuesta.titulo){$(respuesta.destino).dialog("option","title",respuesta.titulo);}
if(respuesta.ancho){$(respuesta.destino).dialog("option","width",eval(respuesta.ancho));}
if(respuesta.alto){$(respuesta.destino).dialog("option","height",eval(respuesta.alto));}
$(respuesta.destino).html(respuesta.codigo);$(respuesta.destino+" .pestanas").tabs();$(respuesta.destino+" .fechaReciente").datepicker({dateFormat:"yy-mm-dd",changeMonth:true,changeYear:true,showButtonPanel:true,minDate:0,maxDate:365});$(respuesta.destino+" .fechaAntigua").datepicker({dateFormat:"yy-mm-dd",changeMonth:true,changeYear:true,showButtonPanel:true,yearRange:"c-100:c"});$(respuesta.destino+" button").each(function(){icono=$(this).attr("title");$(this).button({icons:{primary:icono}});});$(respuesta.destino+" button").click(function(){$("#indicadorEspera").css("display","block");formulario=$(this).parents("form");destino=$(formulario).attr("action");$(formulario).ajaxForm();$(formulario).ajaxSubmit({dataType:"json",success:function(respuesta,estado){procesaRespuesta(respuesta);}});return false;});$(respuesta.destino+" .autocompletable").each(function(){lista=$(this).attr("title");$(this).autocomplete({minLenght:3,source:lista});});}
$(respuesta.destino+' input').keypress(function(tecla){if(tecla.which==13){$("#indicadorEspera").css("display","block");formulario=$(this).parents("form");destino=$(formulario).attr("action");$(formulario).ajaxForm();$(formulario).ajaxSubmit({dataType:"json",success:function(respuesta,estado){procesaRespuesta(respuesta);}});return false;}});$(respuesta.destino).dialog({open:function(){$(this).find(".editor").ckeditor();},close:function(){$(this).find(".editor").ckeditorGet().destroy();}});$(respuesta.destino).dialog("open");}else if(respuesta.accion=="cerrar"&&respuesta.destino!=""){if(respuesta.mensaje){alert(respuesta.mensaje);}
$(respuesta.destino).dialog("close");$(respuesta.destino).dialog("destroy");}else{if(respuesta.mensaje){alert(respuesta.mensaje);}}}
return false;}